<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>루시디</title>
    <meta
      name="description"
      content="밤마다 스쳐가는 흐릿한 꿈을 선명한 이야기로 남기고, 내 맘대로 꿈을 여행하는 자각몽 안내서 루시디와 함께 무의식의 세계를 탐험하세요."
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="icon" type="image/png" href="../unnamed.png" />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #050510;
        color: #e0e0ff;
        -webkit-font-smoothing: antialiased;
      }
      /* Custom Palette based on spec */
      .text-primary {
        color: #d8b4fe; /* Purple-300 */
      }
      .bg-primary {
        background-color: #3d2375; /* Deep Space Purple */
      }
      .text-accent {
        color: #ffef5f; /* Moonlight Yellow */
      }
      .bg-accent {
        background-color: #ffef5f;
      }

      .blur-header {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        background-color: rgba(5, 5, 16, 0.7);
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 1.5rem;
      }
      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
          transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      }
      .animate-on-scroll.visible {
        opacity: 1;
        transform: translateY(0);
      }
      /* Floating Animation for Hero Image */
      @keyframes float {
        0% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(2deg);
        }
        100% {
          transform: translateY(0px) rotate(0deg);
        }
      }
      .floating-img {
        animation: float 6s ease-in-out infinite;
      }
    </style>
  </head>
  <body
    class="min-h-screen flex flex-col selection:bg-[#d8b4fe] selection:text-[#3d2375]"
  >
    <header class="fixed top-0 w-full z-50 blur-header border-b border-white/5">
      <div
        class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between"
      >
        <a
          href="../index.html"
          class="flex items-center gap-3 hover:opacity-80 transition-opacity"
        >
          <img
            src="../unnamed.png"
            alt="OnePick Soft Logo"
            class="h-9 w-auto rounded-lg"
          />
          <span class="font-semibold tracking-tight text-white hidden sm:block"
            >OnePick Soft</span
          >
        </a>

        <nav
          class="hidden md:flex items-center gap-8 text-sm font-medium text-gray-300"
        >
          <a href="#features" class="hover:text-white transition-colors"
            >기능 소개</a
          >
          <a href="#story" class="hover:text-white transition-colors">스토리</a>
          <a
            href="#download"
            class="text-accent hover:text-white transition-colors"
            >다운로드</a
          >
        </nav>
      </div>
    </header>

    <main class="flex-grow pt-24">
      <section
        class="relative min-h-[90vh] flex items-center justify-center px-6 overflow-hidden"
      >
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10">
          <div
            class="absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-[#6200EA] rounded-full blur-[120px] opacity-20"
          ></div>
          <div
            class="absolute bottom-[-10%] right-[10%] w-[600px] h-[600px] bg-[#3d2375] rounded-full blur-[120px] opacity-40"
          ></div>
        </div>

        <div
          class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center"
        >
          <div class="text-center lg:text-left animate-on-scroll delay-100">
            <div
              class="inline-block px-4 py-1.5 mb-6 rounded-full border border-[#d8b4fe]/30 bg-[#d8b4fe]/10 text-primary text-xs font-bold tracking-wider uppercase"
            >
              새로운 무의식의 세계
            </div>
            <h1
              class="text-5xl md:text-7xl font-extrabold tracking-tighter mb-6 leading-tight text-transparent bg-clip-text bg-gradient-to-r from-white via-purple-200 to-indigo-400"
            >
              기억 너머의 꿈을<br />
              당신의 세계로 초대하세요.
            </h1>
            <p
              class="text-lg text-gray-300 mb-8 max-w-xl mx-auto lg:mx-0 leading-relaxed"
            >
              밤마다 스쳐가는 흐릿한 기억들을 선명한 이야기로 남기고,
              <span class="text-accent font-semibold"
                >내 맘대로 꿈을 여행하는 신비로운 방법</span
              >.<br />
              당신의 수면 시간을 경이로운 모험으로 바꿔줄
              <b class="text-white">루시디</b>를 만나보세요.
            </p>
            <div
              class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start"
              id="download"
            >
              <button
                class="px-8 py-4 bg-white text-black rounded-xl font-bold flex items-center justify-center gap-3 hover:bg-gray-200 transition-all transform hover:scale-105 shadow-[0_0_20px_rgba(255,255,255,0.3)]"
              >
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/d/d0/Google_Play_Arrow_logo.svg"
                  class="w-6 h-6"
                  alt="Google Play"
                />
                <span>Google Play 다운로드</span>
              </button>
            </div>
          </div>
          <div class="relative animate-on-scroll delay-200 flex justify-center">
            <div
              class="relative w-[300px] h-[600px] bg-black border-4 border-gray-800 rounded-[3rem] shadow-2xl floating-img flex items-center justify-center overflow-hidden"
            >
              <div
                class="absolute inset-0 bg-gradient-to-br from-[#3d2375] to-[#000000]"
              ></div>
              <div class="absolute top-12 left-6 right-6">
                <div class="h-8 w-24 bg-white/10 rounded-full mb-8"></div>
                <div
                  class="h-32 w-full bg-gradient-to-r from-[#d8b4fe]/30 to-indigo-500/20 rounded-2xl mb-4 border border-white/10 p-4"
                >
                  <div class="h-4 w-1/2 bg-white/20 rounded mb-2"></div>
                  <div class="h-4 w-3/4 bg-white/30 rounded"></div>
                </div>
                <div
                  class="h-20 w-full bg-glass-card rounded-xl mb-4 border border-white/5"
                ></div>
                <div
                  class="h-20 w-full bg-glass-card rounded-xl mb-4 border border-white/5"
                ></div>
              </div>
              <div class="z-10 text-center px-4">
                <i
                  data-lucide="moon-star"
                  class="w-14 h-14 text-accent mx-auto mb-4"
                ></i>
                <p class="font-bold text-xl tracking-wide text-white">루시디</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="story" class="py-24 px-6 relative">
        <div class="max-w-4xl mx-auto text-center animate-on-scroll">
          <h2
            class="text-3xl md:text-5xl font-bold mb-8 bg-gradient-to-b from-white to-gray-400 bg-clip-text text-transparent"
          >
            당신이 몰랐던 밤의 세계
          </h2>
          <p class="text-xl text-gray-300 leading-relaxed mb-12">
            "하늘을 자유롭게 날아오르고, 평소 상상만 하던 일들을 직접 경험해
            보세요."<br />
            꿈속에서는 당신이 상상하는 모든 것이 현실이 됩니다.<br />
            아무도 모르는
            <span class="text-accent font-semibold"
              >당신만의 은밀하고도 경이로운 무대</span
            >로 안내합니다.
          </p>
        </div>
      </section>

      <section id="features" class="py-12 px-6">
        <div class="max-w-6xl mx-auto space-y-24">
          <div
            class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center animate-on-scroll"
          >
            <div
              class="glass-card p-8 md:p-12 order-2 md:order-1 h-full min-h-[300px] flex items-center justify-center relative overflow-hidden group"
            >
              <div
                class="absolute inset-0 bg-gradient-to-br from-[#d8b4fe]/20 to-transparent group-hover:opacity-100 transition-opacity"
              ></div>
              <i
                data-lucide="sparkles"
                class="w-32 h-32 text-white/5 absolute -bottom-4 -right-4"
              ></i>
              <div class="relative z-10 text-center">
                <div
                  class="w-16 h-16 bg-[#3d2375] rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg shadow-purple-900/50 border border-white/10"
                >
                  <i data-lucide="clock" class="w-8 h-8 text-accent"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">부드러운 이정표</h3>
                <p class="text-gray-400 text-sm">
                  현실과 꿈의 경계에서 나를 일깨워주는 소리
                </p>
              </div>
            </div>
            <div class="order-1 md:order-2">
              <span
                class="text-primary font-bold tracking-widest uppercase text-sm mb-2 block"
                >Dream Exploration</span
              >
              <h3 class="text-3xl md:text-4xl font-bold mb-6">
                어느 순간,<br />이것이 꿈임을 깨닫게 됩니다.
              </h3>
              <p class="text-lg text-gray-400 mb-6">
                <strong>잔잔한 일깨움:</strong> 일상과 수면 중에 들려오는
                부드러운 알림 소리가, 당신이 꿈속에서 스스로 의식을 찾을 수
                있도록 돕는 든든한 이정표가 되어줍니다.<br /><br />
                <strong>자연스러운 연결:</strong> 깊은 잠에 빠져들었다가 꿈을
                꾸기 가장 좋은 타이밍에 맞춰 아주 얕게 의식만 깨워 드립니다.
                의식을 가진 채 꿈의 세계로 넘어가는 신비로운 순간을 경험해
                보세요.
              </p>
            </div>
          </div>

          <div
            class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center animate-on-scroll"
          >
            <div>
              <span
                class="text-blue-400 font-bold tracking-widest uppercase text-sm mb-2 block"
                >Dream Canvas & Insight</span
              >
              <h3 class="text-3xl md:text-4xl font-bold mb-6">
                기억의 파편을 모아,<br />나를 들여다보는 시간.
              </h3>
              <p class="text-lg text-gray-400 mb-6">
                아침에 눈을 뜨면 흩어지기 쉬운 꿈의 조각들을 가볍게 남겨보세요.
                어떤 감정을 느꼈는지, 얼마나 생생했는지 기록하다 보면 어느새
                나만의 멋진 꿈 일기장이 완성됩니다.<br /><br />
                당신이 남긴 꿈의 이야기를 통해 그 안에 숨겨진 내면의 상태와
                마음을 보듬어주는 따뜻한 메시지를 전해드립니다.
              </p>
            </div>
            <div
              class="glass-card p-8 md:p-12 min-h-[300px] flex items-center justify-center relative overflow-hidden"
            >
              <div
                class="absolute inset-0 bg-gradient-to-bl from-indigo-900/40 to-transparent"
              ></div>
              <div class="relative z-10 w-full max-w-xs space-y-4">
                <div class="bg-white/5 p-4 rounded-xl border border-white/5">
                  <div class="flex items-center gap-3 mb-2">
                    <div
                      class="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-[10px] text-white/50"
                    >
                      User
                    </div>
                    <span class="text-xs text-gray-400">Today, 07:30 AM</span>
                  </div>
                  <p class="text-sm text-gray-200">
                    "보라색 별이 쏟아지는 밤하늘을 조용히 날아다녔어."
                  </p>
                </div>
                <div
                  class="bg-[#3d2375]/80 p-4 rounded-xl border border-[#d8b4fe]/30"
                >
                  <div class="flex items-center gap-3 mb-2">
                    <i data-lucide="bot" class="w-4 h-4 text-primary"></i>
                    <span class="text-xs text-primary font-bold"
                      >Lucidi AI</span
                    >
                  </div>
                  <p class="text-sm text-gray-200">
                    마음속 깊은 곳에 새로운 영감을 받아들일 준비가 되어 있네요.
                    평온한 당신의 내면이 만들어낸 아름다운 밤의 조각입니다.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div
            class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center animate-on-scroll"
          >
            <div
              class="glass-card p-8 md:p-12 order-2 md:order-1 min-h-[300px] flex items-center justify-center relative overflow-hidden"
            >
              <div
                class="absolute inset-0 bg-gradient-to-tr from-accent/10 to-transparent"
              ></div>
              <div class="text-center relative z-10">
                <div class="flex gap-4 justify-center mb-6">
                  <div
                    class="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-3xl font-black text-black shadow-lg"
                  >
                    🌌
                  </div>
                  <div
                    class="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-3xl font-black text-black shadow-lg"
                  >
                    ☁️
                  </div>
                  <div
                    class="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-3xl font-black text-black shadow-lg"
                  >
                    ✨
                  </div>
                </div>
                <div
                  class="inline-block px-4 py-2 bg-white/10 rounded-full border border-white/20"
                >
                  <span class="text-sm text-white flex items-center gap-2"
                    ><i data-lucide="clover" class="w-4 h-4 text-green-400"></i>
                    무의식이 연결되는 공간</span
                  >
                </div>
              </div>
            </div>
            <div class="order-1 md:order-2">
              <span
                class="text-accent font-bold tracking-widest uppercase text-sm mb-2 block"
                >Dream Square</span
              >
              <h3 class="text-3xl md:text-4xl font-bold mb-6">
                별빛 아래 모인<br />우리들의 꿈 광장
              </h3>
              <p class="text-lg text-gray-400 mb-6">
                나만 간직하기 아까운 신기한 꿈을 꾸셨나요? 꿈 광장에 당신의
                이야기를 조용히 띄워 보내고, 다른 탐험가들은 어떤 환상적인 밤을
                보냈는지 구경해 보세요.<br /><br />
                서로의 몽환적인 기록을 읽고 공감하며, 무의식의 세계를 함께
                여행하는 따뜻한 즐거움을 누릴 수 있습니다.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-[#020205] border-t border-white/5 py-16 mt-12">
      <div class="max-w-6xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="font-bold text-lg mb-2 text-white flex items-center gap-2">
            <img src="../unnamed.png" class="w-6 h-6 rounded-md" /> Lucidi by
            OnePick Soft
          </h3>
          <p class="text-sm text-gray-500 mb-4">
            © 2026 OnePick Soft. All rights reserved.
          </p>
          <p class="text-sm text-gray-500 mb-6">
            오늘 밤, 당신의 꿈이 달라집니다.
          </p>

          <div class="flex gap-4 text-xs text-gray-400">
            <a
              href="./TERMS_OF_SERVICE.html"
              class="hover:text-white transition-colors"
              >이용약관</a
            >
            <a
              href="./PRIVACY_POLICY.html"
              class="hover:text-white transition-colors"
              >개인정보처리방침</a
            >
          </div>
        </div>

        <div class="text-left md:text-right space-y-1 text-xs text-gray-500">
          <p>상호: 원픽소프트 | 대표: 이정빈</p>
          <p>사업자등록번호: 571-56-00945</p>
          <p>통신판매업신고: 2026-인천부평-0026호</p>
          <p class="mt-2">
            <a
              href="mailto:onepicksoft@gmail.com"
              class="hover:text-gray-300 underline"
              >onepicksoft@gmail.com</a
            >
            |
            <button
              id="admin-btn"
              class="hover:text-red-400 font-bold ml-1 transition-colors"
            >
              Admin
            </button>
          </p>
        </div>
      </div>
    </footer>

    <div
      id="admin-modal"
      class="fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm hidden items-center justify-center"
    >
      <div
        class="bg-[#1a1a2e] border border-white/10 rounded-2xl w-full max-w-md p-6 m-4 relative shadow-2xl"
      >
        <button
          id="close-admin"
          class="absolute top-4 right-4 text-white/50 hover:text-white"
        >
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <i data-lucide="shield-check" class="w-5 h-5 text-red-400"></i>
          관리자 메뉴
        </h2>

        <!-- Login Form -->
        <div id="admin-login-section">
          <div class="space-y-4 pt-4">
            <button
              id="admin-login-btn"
              class="w-full bg-white text-black rounded-xl py-3.5 font-bold hover:bg-gray-200 transition-colors flex items-center justify-center gap-3"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 48 48"
                width="20px"
                height="20px"
              >
                <path
                  fill="#FFC107"
                  d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"
                />
                <path
                  fill="#FF3D00"
                  d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"
                />
                <path
                  fill="#4CAF50"
                  d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"
                />
                <path
                  fill="#1976D2"
                  d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"
                />
              </svg>
              구글 계정으로 관리자 로그인
            </button>
            <p class="text-xs text-white/30 text-center mt-2">
              등록된 마스터 계정만 접근할 수 있습니다.
            </p>
          </div>
        </div>

        <!-- Dashboard Form -->
        <div id="admin-dashboard-section" class="hidden">
          <div class="space-y-4">
            <div>
              <label class="block text-xs text-white/40 mb-1 font-bold"
                >최소 요구 버전 (예: 1.0.5)</label
              >
              <input
                type="text"
                id="config-version"
                class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-green-500/50"
                placeholder="1.0.0"
              />
            </div>
            <div>
              <label class="block text-xs text-white/40 mb-1 font-bold"
                >업데이트 팝업 메시지</label
              >
              <textarea
                id="config-msg"
                class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-green-500/50 h-24 resize-none"
              ></textarea>
            </div>
            <div>
              <label class="block text-xs text-white/40 mb-1 font-bold"
                >스토어 링크 URL</label
              >
              <input
                type="text"
                id="config-url"
                class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-green-500/50"
                placeholder="market://details?id=..."
              />
            </div>
            <div class="flex gap-2 pt-2">
              <button
                id="admin-logout-btn"
                class="flex-1 bg-white/5 text-white/50 border border-white/10 rounded-xl py-3 font-bold hover:bg-white/10 transition-colors text-xs"
              >
                로그아웃
              </button>
              <button
                id="admin-clear-btn"
                class="flex-1 bg-gray-500/20 text-gray-300 border border-gray-500/30 rounded-xl py-3 font-bold hover:bg-gray-500/30 transition-colors text-xs"
              >
                초기화(해제)
              </button>
              <button
                id="admin-save-btn"
                class="flex-1 bg-green-500/20 text-green-400 border border-green-500/30 rounded-xl py-3 font-bold hover:bg-green-500/30 transition-colors text-xs"
              >
                설정 저장
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
      import {
        getAuth,
        signInWithPopup,
        GoogleAuthProvider,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc,
      } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAsIc3kTstDICaxn1JwFOHIseP0NFUxyfk",
        authDomain: "onepicksoft-dream.firebaseapp.com",
        projectId: "onepicksoft-dream",
        storageBucket: "onepicksoft-dream.firebasestorage.app",
        messagingSenderId: "113950046877",
        appId: "1:113950046877:web:c06b5854e8c1210d007274",
        measurementId: "G-6VD43BT6WL",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      const MASTER_EMAIL = "onepicksoft@gmail.com";

      // UI 요소
      const adminBtn = document.getElementById("admin-btn");
      const adminModal = document.getElementById("admin-modal");
      const closeAdminBtn = document.getElementById("close-admin");

      const loginSection = document.getElementById("admin-login-section");
      const dashboardSection = document.getElementById(
        "admin-dashboard-section",
      );

      const loginBtn = document.getElementById("admin-login-btn");

      const vInput = document.getElementById("config-version");
      const mInput = document.getElementById("config-msg");
      const uInput = document.getElementById("config-url");
      const saveBtn = document.getElementById("admin-save-btn");
      const clearBtn = document.getElementById("admin-clear-btn");
      const logoutBtn = document.getElementById("admin-logout-btn");

      adminBtn.addEventListener("click", () => {
        adminModal.classList.remove("hidden");
        adminModal.classList.add("flex");
      });

      closeAdminBtn.addEventListener("click", () => {
        adminModal.classList.add("hidden");
        adminModal.classList.remove("flex");
      });

      // 인증 상태 확인
      onAuthStateChanged(auth, async (user) => {
        if (user && user.email === MASTER_EMAIL) {
          loginSection.classList.add("hidden");
          dashboardSection.classList.remove("hidden");
          loadConfig();
        } else {
          loginSection.classList.remove("hidden");
          dashboardSection.classList.add("hidden");
          if (user) await signOut(auth); // 마스터가 아니면 튕김
        }
      });

      loginBtn.addEventListener("click", async () => {
        try {
          const provider = new GoogleAuthProvider();
          // 로그인 유지 시간 등을 위해 필요 시 provider 옵션을 줄 수 있음
          await signInWithPopup(auth, provider);

          if (auth.currentUser?.email !== MASTER_EMAIL) {
            alert("마스터 계정이 아닙니다.");
            await signOut(auth);
          }
        } catch (e) {
          if (e.code !== "auth/popup-closed-by-user") {
            alert("로그인 실패: " + e.message);
          }
        }
      });

      logoutBtn.addEventListener("click", async () => {
        await signOut(auth);
      });

      async function loadConfig() {
        try {
          saveBtn.textContent = "로딩 중...";
          const snap = await getDoc(doc(db, "settings", "app_config"));
          if (snap.exists()) {
            const data = snap.data();
            vInput.value = data.minVersion || "";
            mInput.value = data.updateMessage || "";
            uInput.value = data.storeUrl || "";
          }
        } catch (e) {
          console.error(e);
          alert("설정 로드 실패");
        } finally {
          saveBtn.textContent = "설정 저장";
        }
      }

      saveBtn.addEventListener("click", async () => {
        try {
          saveBtn.textContent = "저장 중...";
          await setDoc(
            doc(db, "settings", "app_config"),
            {
              minVersion: vInput.value,
              updateMessage: mInput.value,
              storeUrl: uInput.value,
            },
            { merge: true },
          );
          alert("강제 업데이트 설정이 저장되었습니다.");
        } catch (e) {
          console.error(e);
          alert("저장 실패");
        } finally {
          saveBtn.textContent = "설정 저장";
        }
      });

      clearBtn.addEventListener("click", async () => {
        try {
          clearBtn.textContent = "처리 중...";
          await setDoc(
            doc(db, "settings", "app_config"),
            {
              minVersion: "",
              updateMessage:
                "새로운 버전이 필요합니다. 스토어에서 업데이트해주세요.",
              storeUrl: "market://details?id=com.onepicksoft.dream",
            },
            { merge: true },
          );
          alert("강제 업데이트 설정이 해제되었습니다.");
          vInput.value = "";
          mInput.value =
            "새로운 버전이 필요합니다. 스토어에서 업데이트해주세요.";
          uInput.value = "market://details?id=com.onepicksoft.dream";
        } catch (e) {
          console.error(e);
          alert("초기화 실패");
        } finally {
          clearBtn.textContent = "초기화(해제)";
        }
      });

      lucide.createIcons();

      // Scroll Animation
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        },
        { threshold: 0.1 },
      );

      document.querySelectorAll(".animate-on-scroll").forEach((el) => {
        observer.observe(el);
      });
    </script>
  </body>
</html>
